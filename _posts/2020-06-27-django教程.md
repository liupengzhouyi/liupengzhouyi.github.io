---
layout: post
categories: posts
title: djangoæ•™ç¨‹
subtitle: djangoæ•™ç¨‹
featured-image: /images/2016-11-19/abstract-2.jpg
tags: [django]
date-string: June 27, 2020
---

# ç®€ä»‹

## Djangoæ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ

> æˆ‘ç°åœ¨æ²¡æœ‰ææ˜ç™½ï¼



# å»ºç«‹ä¸€ä¸ªDjangoé¡¹ç›®

## ç¼–è¯‘å™¨

* PyCharm

  ![æˆªå±2020-06-27 ä¸Šåˆ12.15.03](https://tva1.sinaimg.cn/large/007S8ZIlly1gg65b8q15ej308u06w3zp.jpg)

## Start

### Create New Project

![æˆªå±2020-06-27 ä¸Šåˆ12.12.07](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bdfy9gj31a30u0gnx.jpg)

### Setting Project

![æˆªå±2020-06-27 ä¸Šåˆ12.16.24](https://tva1.sinaimg.cn/large/007S8ZIlly1gg65e8uz7rj318w0u042q.jpg)

### Over

![æˆªå±2020-06-27 ä¸Šåˆ12.19.09](https://tva1.sinaimg.cn/large/007S8ZIlly1gg65fm9chsj31b30u0q6b.jpg)

## Run

![æˆªå±2020-06-27 ä¸Šåˆ12.20.35](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bdrse5j30ik07qgln.jpg)

## Effect

![æˆªå±2020-06-27 ä¸Šåˆ12.22.10](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67be7iqcj31b30u076g.jpg)

# File

> Mainly introduce the role of file directory.

![æˆªå±2020-06-27 ä¸Šåˆ12.24.00](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bhhpcgj310e0l8dgx.jpg)

## asgi.py

> æ¡ä»¶é™åˆ¶ï¼Œæˆ‘æ²¡æœ‰è¯¦ç»†äº†è§£è¿‡ï¼ŒIf I learn to update it later.

## setting.py

> é¡¹ç›®é…ç½®æ–‡ä»¶
>
> * é…ç½®åŠŸèƒ½
> * å›½é™…åŒ–é…ç½®ï¼ˆè¯­è¨€å’Œæ—¶åŒºï¼‰
> * æ•°æ®åº“é…ç½®

## urls.py

> è·¯å¾„é…ç½®æ–‡ä»¶

## wigs.py

> æ¡ä»¶é™åˆ¶ï¼Œæˆ‘æ²¡æœ‰è¯¦ç»†äº†è§£è¿‡ï¼ŒIf I learn to update it later.

## db.sqlite3

> è‡ªåŠ¨å¼¹å‡ºçš„æ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨sqliteã€‚

## manage.py

> æ¡ä»¶é™åˆ¶ï¼Œæˆ‘æ²¡æœ‰è¯¦ç»†äº†è§£è¿‡ï¼ŒIf I learn to update it later.

# Django Project cutover Databases

## Databases

* MySQL 

## How to Cutover Databases

### update setting.py

#### path

```bash
yourProject/yourProject/settings.py
```

####  ordCode

![æˆªå±2020-06-27 ä¸Šåˆ12.33.55](https://tva1.sinaimg.cn/large/007S8ZIlly1gg65xb5exyj30zc0b6ab2.jpg)

#### newCode

![æˆªå±2020-06-27 ä¸Šåˆ12.34.51](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bsbfoxj30y80hugnu.jpg)

### tall Project your cutover  databases

#### path

```bash
yourProject/yourProject/init.py
```

#### add code

```python
import pymysql
pymysql.install_as_MySQLdb()
```

![æˆªå±2020-06-27 ä¸Šåˆ12.39.01](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bsgm5tj30y80hugnu.jpg)

# Registered background administrator

## Open Terminaal

![æˆªå±2020-06-27 ä¸Šåˆ12.42.10](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bx0069j31160b8753.jpg)



## input command line code

```bash
python manage.py migrate
```

```bash
python manage.py createsuperuser
```

![æˆªå±2020-06-27 ä¸Šåˆ12.45.02](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67bxgv29j31300co75m.jpg)



# Create App Or Function

> Maybe you should know something about MVC or MVT

## create file by django

### input command line code

```python
python manage.py startapp your_app_name
```

'your_app_name' as 'card':

![æˆªå±2020-06-27 ä¸Šåˆ12.51.16](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67c3jf63j30j808wq36.jpg)

## What is the role of the file?

### \_\_init\_\_.py

> ä¸çŸ¥é“ï¼ŒğŸ¤·â€â™‚ï¸ï¼

### admin.py

>è®¾ç½®ç®¡ç†å‘˜å¯¹è¯¥åŠŸèƒ½çš„ç®¡ç†

### apps.py

>ä¸çŸ¥é“ï¼ŒğŸ¤·â€â™‚ï¸ï¼

### models.py

> æ•°æ®å®ä½“ï¼Œä¸æ•°æ®åº“äº¤äº’ï¼ˆORMï¼‰

### test.py

> æµ‹è¯•

views.py

> è§†å›¾ï¼ˆè¿”å›æ•°æ®è¿˜æ˜¯é¡µé¢ï¼‰

# é…ç½®è·¯ç”±

## åœ¨ä½ çš„yourproject/book/views.pyä¸­å†™ä¸€ä¸ªæ–¹æ³•

```python
def sayHelloAt20200626(request):
    return HttpResponse("Hello World")
```

## åœ¨urls.pyä¸­é…ç½®

![æˆªå±2020-06-27 ä¸Šåˆ1.00.38](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67caif9sj30rk0gwwgj.jpg)

## æµè§ˆå™¨è®¿é—®

![æˆªå±2020-06-27 ä¸Šåˆ1.02.33](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67cb158yj30q206yq33.jpg)

# Communicate with database

## Create Model

### Path

```python
yourProject/yourApp/models.py
```

### Code

```python
from django.db import models

# Create your models here.

# Book
class Book(models.Model):
    '''Book model class'''
    # å­—ç¬¦ä¸²
    # max_length ï¼š æœ€å¤§é•¿åº¦
    title = models.CharField(max_length=40)
    # pub date
    # date type
    pub_date = models.DateField()

    def __str__(self):
        return self.title

```

## Create initial file

### Open Terminal

![æˆªå±2020-06-27 ä¸Šåˆ1.08.43](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67cpeng9j317u0ga3zv.jpg)

### input command line code

```bash
python manage.py makemigrations
```

## initial file ctrate table in databases

### Open Terminal

![æˆªå±2020-06-27 ä¸Šåˆ1.09.13](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67copd4uj31de0g8goa.jpg)

### input command line code

```bash
python manage.py migrate
```

## Databaes

![æˆªå±2020-06-27 ä¸Šåˆ1.09.41](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67coyysxj31ee0nc40p.jpg)



# æ•°æ®å¢åˆ æ”¹æŸ¥

## Create

```python
e = Entry()
e.name = "root"
e.save()
```

## Select

```python
e = Entry.objects.get(id=2)
```

## Add

```python
e.save()
```

## Update

```python
e.name = "newName"
e.save()
```

# Show Data In Web Page

## Create Html File

### path

```bash
yourProject/templates/book/index.html
```

### code

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
</head>
<body>
    <h1>
        Welcome! My friend!
    </h1>
    <hr>
    <ol>
        {% for i in numbers %}
            <ul>
                {{ i }}
            </ul>
        {% endfor %}
    </ol>

</body>
</html>
```

## create view function

### path

```bash
yourProject/book/views.py
```

### Code1

```python
def indexPage(request):
    # è®°è½½æ¨¡æ¿æ–‡ä»¶ï¼Œç”Ÿäº§æ¨¡æ¿å¯¹è±¡
    template = loader.get_template('book/index.html')
    # ç»™å®šæ¨¡æ¿ä¸Šä¸‹æ–‡ï¼Œç»™æ¨¡æ¿æ–‡ä»¶ä¼ é€’æ•°æ®
    context = {'numbers': list(range(1, 10))}
    # æ¨¡æ¿æ¸²æŸ“ï¼šäº§ç”Ÿæ ‡å‡†çš„htmlæ–‡æ¡£
    res_html = template.render(context, request)
    # è¿”å›
    return HttpResponse(res_html)
```

### code2

```python
def indexPage(request):
    return render(request, "book/index.html", {'numbers': list(range(1, 10))})
```

## Setting Path or Url

### App

#### path

```bash
yourProject/book/urls.py
```

#### code

```python
from django.contrib import admin
from django.urls import path, include
from django.conf.urls import url
from book.views import sayHelloAt20200626
from book.views import indexPage
from book.views import showBooks
from book.views import bookDetail

urlpatterns = [
    url(r'^sayHelloAt20200626$', sayHelloAt20200626),
    url(r'^indexPage$', indexPage),
]
```

### Project

#### path

```bash
yourProject/yourProject/urls.py
```

#### code

```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('book.urls'))
]
```

## Web Page

![æˆªå±2020-06-27 ä¸Šåˆ1.26.28](https://tva1.sinaimg.cn/large/007S8ZIlly1gg67dz15uaj320z0u0wg5.jpg)
